<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DiamondLink | アカウント作成</title>
  <link rel="icon" href="/diamondlink/images/fabicon_square.png" type="image/png">
  <link rel="stylesheet" href="/diamondlink/css/style.css?v=2">
  <link rel="stylesheet" href="/diamondlink/css/header.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .required { color: red; margin-left: 5px; }
    .error-message { color: red; font-size: 0.9em; margin-top: 5px; }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: url('/diamondlink/images/background-1.png') center/cover no-repeat;
      opacity: 0.2;
      z-index: -1;
    }
    .name-fields, .area-fields { display: flex; gap: 20px; margin-top: 10px; }
    .field-group { display: flex; flex-direction: column; }
    .submit-button {
      display: inline-block; padding: 12px 30px;
      font-size: 16px; font-weight: bold;
      border: none; border-radius: 8px;
      background-color: #007BFF; color: white;
      cursor: pointer; transition: background-color 0.3s ease;
    }
    .submit-button:hover { background-color: #0056b3; }
    .password-label-and-toggle { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .password-label-and-toggle button { background: none; border: none; cursor: pointer; font-size: 1.2em; }
    .password-input-wrap { max-width: 300px; }
    #password-strength { height: 8px; background: #ccc; border-radius: 4px; margin-top: 10px; }
    #password-strength-bar { height: 100%; width: 0%; background: red; transition: width 0.3s; }
    #password-strength-text { margin: 5px 0 0; font-size: 0.9em; color: gray; }
  </style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
legend {
  font-size: 1.5em; /* ←文字を1.5倍くらいに大きくする */
}
  </style>
  
</head>

<body>
<div id="header-placeholder"></div>
<main class="container">
  <div class="fade-in-section">
    <h1>アカウント作成</h1>
    <p>以下の情報を入力してください（※現在はダミーです）。</p>
    <p>すでにアカウントをお持ちの方は <a href="#" id="login-link">こちらからログイン</a></p>
    
    <form id="account-form" action="https://formspree.io/f/xqaqaloa" method="POST">
      <div class="card fade-in-section">
        <fieldset>
          <legend>お客様情報</legend>

          <div class="name-fields">
            <div class="field-group">
              <label for="last-name">姓<span class="required">*</span></label>
              <input type="text" name="last-name" id="last-name" required>
              <div class="error-message" id="error-last-name"></div>
            </div>
            <div class="field-group">
              <label for="first-name">名<span class="required">*</span></label>
              <input type="text" name="first-name" id="first-name" required>
              <div class="error-message" id="error-first-name"></div>
            </div>
          </div><br>

          <label>ニックネーム<span class="required">*</span>（あとから変更できます）<br>
            <input type="text" name="nickname" id="nickname">
            <div class="error-message" id="error-nickname"></div>
          </label><br>

          <label>生年月日（ハイフンなし）<span class="required">*</span><br>
            <input type="text" id="birthdate" name="birthdate" placeholder="例）2000-12-15" inputmode="numeric">
            <div class="error-message" id="error-birthdate"></div>
          </label><br>

          <label>性別<span class="required">*</span><br>
            <select name="gender" required>
              <option value="">選択してください</option>
              <option value="male">男性</option>
              <option value="female">女性</option>
              <option value="other">その他</option>
            </select>
            <div class="error-message" id="error-gender"></div>
          </label><br>

          <div class="area-fields">
            <div class="field-group">
              <label for="prefecture">都道府県<span class="required">*</span></label>
              <select name="prefecture" id="prefecture" required>
                <option value="">選択してください</option>
              </select>
              <div class="error-message" id="error-prefecture"></div>
            </div>

            <div class="field-group">
              <label for="city-select">市区町村<span class="required">*</span></label>
              <select name="city" id="city-select" required>
                <option value="">選択してください</option>
              </select>
              <div class="error-message" id="error-city"></div>
            </div>
          </div><br>

          <label>メールアドレス<span class="required">*</span><br>
            <input type="email" name="email" class="long-input" placeholder="例）diamondlink@example.com" required>
          </label><br><

          <div class="password-label-and-toggle">
            <label for="password">パスワード<span class="required">*</span></label>
            <button type="button" id="toggle-password"><i class="fa-solid fa-eye"></i></button>
          </div>
          <div class="password-input-wrap">
            <input type="password" name="password" id="password" required>
            <div id="password-strength">
              <div id="password-strength-bar"></div>
            </div>
            <p id="password-strength-text">パスワードの強度を表示します</p>
          </div>
        </fieldset>
      </div><br>

      <div class="card fade-in-section">
        <fieldset>
          <legend>ご利用について</legend>
          <label>Q.現在、野球またはソフトボールチームに加入していますか？<span class="required">*</span><br>
            <input type="radio" name="team-member" value="はい"> はい
            <input type="radio" name="team-member" value="いいえ"> いいえ
          </label><br><br>

          <label>Q.ご利用目的を教えてください。（複数選択可）<span class="required">*</span><br>
            <input type="checkbox" name="purpose" value="join-team"> メンバー募集<br>
            <input type="checkbox" name="purpose" value="practice-only"> 練習参加<br>
            <input type="checkbox" name="purpose" value="publish-team"> チーム情報掲載<br>
            <input type="checkbox" name="purpose" value="transfer-team"> 移籍先探し<br>
            <input type="checkbox" name="purpose" value="practice-match"> 練習試合相手探し<br>
            <input type="checkbox" name="purpose" value="other"> その他<br>
            <textarea name="other-purpose" rows="6" cols="60" placeholder="その他の場合はこちらに記入"></textarea>
          </label>
        </fieldset>
      </div><br>

      <button type="submit" class="submit-button">アカウント作成（ダミー）</button>
      <p style="font-size: small; color: gray;">※まだ送信機能は有効になっていません</p>
    </form>
  </div>
</main>

  <!-- ログインモーダル -->
<div id="login-modal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h2>ログイン</h2>
    <form>
      <label>メールアドレス</label><br>
      <input type="email" required><br><br>
      <label>パスワード</label><br>
      <input type="password" required><br><br>
      <button type="submit">ログイン</button>
    </form>
  </div>
</div>

<div id="footer-placeholder"></div>

<!-- JavaScript -->
<script src="/diamondlink/js/header-loader.js"></script>
<script src="/diamondlink/js/header-mobile.js"></script>
<script src="/diamondlink/js/prefecture-loader.js"></script>
<script src="/diamondlink/js/common.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const prefectureSelect = document.getElementById('prefecture');
  const citySelect = document.getElementById('city-select');
  if (prefectureSelect && citySelect) {
    citySelect.disabled = true;
    fetch('/diamondlink/json/prefecture.json')
      .then(res => res.json())
      .then(data => {
        for (const region in data) {
          const optgroup = document.createElement('optgroup');
          optgroup.label = region;
          data[region].forEach(pref => {
            const option = document.createElement('option');
            option.value = pref;
            option.textContent = pref;
            optgroup.appendChild(option);
          });
          prefectureSelect.appendChild(optgroup);
        }
      });
    prefectureSelect.addEventListener('change', function() {
      const pref = this.value;
      citySelect.innerHTML = '<option value="">選択してください</option>';
      if (!pref) return citySelect.disabled = true;
      citySelect.disabled = false;
      fetch('/diamondlink/json/prefecture_city.json')
        .then(res => res.json())
        .then(data => {
          if (data[pref]) data[pref].forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
          });
        });
    });
  }

  const passwordInput = document.getElementById('password');
  const togglePasswordBtn = document.getElementById('toggle-password');
  if (togglePasswordBtn && passwordInput) {
    togglePasswordBtn.addEventListener('click', function() {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        this.innerHTML = '<i class="fa-solid fa-eye"></i>';
      } else {
        passwordInput.type = 'password';
        this.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
      }
    });
  }

  if (passwordInput) {
    const strengthBar = document.getElementById('password-strength-bar');
    const strengthText = document.getElementById('password-strength-text');
    passwordInput.addEventListener('input', function() {
      const value = passwordInput.value;
      let strength = 0;
      if (value.length >= 8) strength++;
      if (/[A-Z]/.test(value)) strength++;
      if (/[0-9]/.test(value)) strength++;
      if (/[^A-Za-z0-9]/.test(value)) strength++;
      const widths = ['0%', '25%', '50%', '75%', '100%'];
      const colors = ['red', 'red', 'orange', 'yellowgreen', 'green'];
      const texts = ['パスワードを入力してください', '弱いパスワードです', '普通のパスワードです', '強めのパスワードです', '非常に強いパスワードです'];
      strengthBar.style.width = widths[strength];
      strengthBar.style.background = colors[strength];
      strengthText.textContent = texts[strength];
    });
  }

  const birthdateInput = document.getElementById('birthdate');
  if (birthdateInput) {
    birthdateInput.addEventListener('input', function() {
      let v = birthdateInput.value.replace(/[０-９]/g, s => String.fromCharCode(s.charCodeAt(0) - 65248));
      v = v.replace(/[^0-9]/g, '');
      if (v.length > 8) v = v.slice(0, 8);
      let formatted = v;
      if (v.length >= 7) formatted = `${v.slice(0,4)}-${v.slice(4,6)}-${v.slice(6,8)}`;
      else if (v.length >= 5) formatted = `${v.slice(0,4)}-${v.slice(4,6)}`;
      birthdateInput.value = formatted;
    });
    birthdateInput.addEventListener('blur', function() {
      const val = birthdateInput.value.replace(/[^0-9]/g, '');
      if (val.length === 8) {
        const y = parseInt(val.slice(0,4)), m = parseInt(val.slice(4,6)), d = parseInt(val.slice(6,8));
        const date = new Date(y, m-1, d);
        if (date.getFullYear() !== y || date.getMonth() + 1 !== m || date.getDate() !== d) {
          alert('正しい日付を入力してください');
          birthdateInput.value = '';
        }
      } else if (val.length) {
        alert('生年月日は8桁で入力してください');
        birthdateInput.value = '';
      }
    });
  }
  // ▼ ログインモーダル開閉
const loginLink = document.getElementById('login-link');
const loginModal = document.getElementById('login-modal');
const closeModal = document.querySelector('.close-button');

if (loginLink && loginModal && closeModal) {
  loginLink.addEventListener('click', function(e) {
    e.preventDefault();
    loginModal.style.display = 'flex';
    loginModal.style.opacity = 0;
    setTimeout(() => {
      loginModal.style.opacity = 1;
      loginModal.style.transition = 'opacity 0.3s';
    }, 10);
  });

  closeModal.addEventListener('click', function() {
    loginModal.style.opacity = 0;
    setTimeout(() => {
      loginModal.style.display = 'none';
    }, 300);
  });

  window.addEventListener('click', function(e) {
    if (e.target === loginModal) {
      loginModal.style.opacity = 0;
      setTimeout(() => {
        loginModal.style.display = 'none';
      }, 300);
    }
  });
}
});
</script>
</body>
</html>
