<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DiamondLink | チーム登録</title>
  <link rel="icon" href="/diamondlink/images/fabicon_square.png" type="image/png">
  <link rel="stylesheet" href="/diamondlink/css/style.css?v=2">
  <link rel="stylesheet" href="/diamondlink/css/header.css">
</head>
<body>

  <!-- 共通ヘッダー挿入 -->
  <div id="header-placeholder"></div>

  <!-- メインコンテンツ -->
  <main class="container">
    <h1>チーム登録</h1>

    <form id="team-registration-form">
      <!-- チーム名 -->
      <label>チーム名<span class="required">*</span><br>
        <input type="text" name="team-name" required>
      </label><br><br>

      <!-- 活動地域 -->
      <fieldset>
        <legend>活動地域</legend>
        <label>都道府県<span class="required">*</span><br>
          <select name="prefecture" id="prefecture" required>
            <option value="">選択してください</option>
          </select>
          <div class="error-message" id="error-prefecture"></div>
        </label><br><br>
        <label>市区町村<span class="required">*</span><br>
          <select name="city" id="city-select" required>
            <option value="">選択してください</option>
          </select>
          <div class="error-message" id="error-city"></div>
        </label><br><br>
      </fieldset><br>

      <!-- チーム構成 -->
      <fieldset>
        <legend>チーム構成</legend>
        <label>競技種別<span class="required">*</span><br>
          <select name="sport-type" id="sport-type" required>
            <option value="">選択してください</option>
            <option value="baseball">野球</option>
            <option value="softball">ソフトボール</option>
          </select>
        </label><br><br>
        <label>区分<span class="required">*</span><br>
          <select name="division" id="division" required disabled>
            <option value="">選択してください</option>
          </select>
        </label><br><br>

        <label>性別<span class="required">*</span><br>
          <select name="gender" required>
            <option value="">選択してください</option>
            <option value="male">男子</option>
            <option value="female">女子</option>
            <option value="mixed">混合</option>
          </select>
          <div class="error-message" id="error-gender"></div>
        </label><br><br>

        <label>年齢層<span class="required">*</span><br>
          <select name="age-group" required>
            <option value="">選択してください</option>
            <option value="adult">一般</option>
            <option value="high-school">高校生</option>
            <option value="junior high-school">中学生</option>
            <option value="elementary school">小学生</option>
            <option value="other">その他</option>
          </select>
          <div class="error-message" id="error-age-group"></div>
        </label><br><br>
      </fieldset><br>

      <!-- 練習日設定 -->
      <fieldset>
        <legend>練習日設定</legend>

        <!-- 月曜日 -->
        <div class="practice-day-row">
          <label>
            <input type="checkbox" name="practice-monday" id="monday" class="practice-checkbox">
            月曜日
          </label>
          <select name="monday-frequency" id="monday-frequency" class="practice-frequency" disabled>
            <option value="weekly">毎週</option>
            <option value="biweekly">隔週</option>
            <option value="monthly">毎月第⚪︎</option>
          </select>
          <input type="time" name="monday-start" id="monday-start" disabled>
          <input type="time" name="monday-end" id="monday-end" disabled>
        </div>

        <!-- 他の曜日も同様に追加 -->

      </fieldset><br>

      <!-- 代表者氏名 -->
      <fieldset>
        <legend>代表者氏名</legend>
        <label>姓<span class="required">*</span><br>
          <input type="text" name="last-name" id="last-name" required>
        </label><br><br>
        <label>名<span class="required">*</span><br>
          <input type="text" name="first-name" id="first-name" required>
        </label><br><br>
      </fieldset><br>

      <!-- メールアドレス -->
      <label>連絡先（メールアドレス）<span class="required">*</span><br>
        <input type="email" name="email" required>
      </label><br><br>

      <!-- SNSアカウント -->
      <fieldset>
        <legend>SNSアカウント（任意）</legend>
        <label>X（旧Twitter）URL<br>
          <input type="url" name="x-url" class="long-input" placeholder="https://twitter.com/example">
        </label><br><br>

        <label>Instagram URL<br>
          <input type="url" name="instagram-url" class="long-input" placeholder="https://instagram.com/example">
        </label><br><br>

        <label>YouTube URL<br>
          <input type="url" name="youtube-url" class="long-input" placeholder="https://youtube.com/@example">
        </label><br><br>
      </fieldset><br>

      <!-- チーム紹介 -->
      <label>チーム紹介（自由記入欄）<br>
        <textarea name="team-introduction" rows="15" cols="100" placeholder="例：私たちのチームは楽しく活動することをモットーにしています！"></textarea>
      </label><br><br>

      <button type="submit" disabled>送信（ダミー）</button>
      <p style="font-size: small; color: gray;">※現在は送信機能は未対応です</p>
    </form>
  </main>

  <div id="footer-placeholder"></div>

  <!-- JavaScriptまとめ -->
  <script src="/diamondlink/js/header-loader.js"></script>
  <script src="/diamondlink/js/header-mobile.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 都道府県選択肢の読み込み
      const prefectureSelect = document.getElementById('prefecture');
      const citySelect = document.getElementById('city-select');
      fetch('/diamondlink/json/prefecture.json')
        .then(response => response.json())
        .then(data => {
          prefectureSelect.innerHTML = '<option value="">選択してください</option>';
          for (const region in data) {
            const optgroup = document.createElement('optgroup');
            optgroup.label = region;
            data[region].forEach(pref => {
              const option = document.createElement('option');
              option.value = pref;
              option.textContent = pref;
              optgroup.appendChild(option);
            });
            prefectureSelect.appendChild(optgroup);
          }
        })
        .catch(error => {
          console.error('都道府県リストの読み込みに失敗しました:', error);
        });

      // 市区町村の表示
      prefectureSelect.addEventListener('change', function() {
        const selectedPrefecture = this.value;
        citySelect.innerHTML = '<option value="">選択してください</option>';

        if (selectedPrefecture) {
          fetch('/diamondlink/json/prefecture_city.json')
            .then(response => response.json())
            .then(data => {
              if (data[selectedPrefecture]) {
                data[selectedPrefecture].forEach(city => {
                  const option = document.createElement('option');
                  option.value = city;
                  option.textContent = city;
                  citySelect.appendChild(option);
                });
              }
            })
            .catch(error => {
              console.error('市区町村データの読み込みに失敗しました:', error);
            });
        }
      });

      // 競技種別による区分選択肢の変更
      const sportType = document.getElementById('sport-type');
      const division = document.getElementById('division');
      sportType.addEventListener('change', function() {
        division.innerHTML = '<option value="">選択してください</option>';
        if (sportType.value === "baseball") {
          division.disabled = false;
          const options = ["指定なし", "軟式", "準硬式", "硬式"];
          options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.textContent = opt;
            division.appendChild(option);
          });
        } else if (sportType.value === "softball") {
          division.disabled = false;
          const options = ["指定なし", "ゴム", "革"];
          options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.textContent = opt;
            division.appendChild(option);
          });
        } else {
          division.disabled = true;
          const option = document.createElement('option');
          option.value = "";
          option.textContent = "選択してください";
          division.appendChild(option);
        }
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('team-registration-form');
      form.addEventListener('submit', function(event) {
        let hasError = false;
        const xUrl = form.querySelector('input[name="x-url"]').value.trim();
        const instagramUrl = form.querySelector('input[name="instagram-url"]').value.trim();
        const youtubeUrl = form.querySelector('input[name="youtube-url"]').value.trim();

        if (xUrl && !xUrl.startsWith('https://twitter.com/')) {
          alert('X（旧Twitter）のURLは「https://twitter.com/〜」で始まる必要があります。');
          hasError = true;
        }

        if (instagramUrl && !instagramUrl.startsWith('https://instagram.com/') && !instagramUrl.startsWith('https://www.instagram.com/')) {
          alert('InstagramのURLは「https://instagram.com/〜」で始まる必要があります。');
          hasError = true;
        }

        if (youtubeUrl && !youtubeUrl.startsWith('https://youtube.com/') && !youtubeUrl.startsWith('https://www.youtube.com/')) {
          alert('YouTubeのURLは「https://youtube.com/〜」または「https://www.youtube.com/〜」で始まる必要があります。');
          hasError = true;
        }

        if (hasError) {
          event.preventDefault();
        }
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const userFirstName = '太郎';
      const userLastName = '山田';
      document.getElementById('last-name').value = userLastName;
      document.getElementById('first-name').value = userFirstName;
    });
  </script>

</body>
</html>
