<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DiamondLink | アカウント作成</title>
  <link rel="icon" href="/diamondlink/images/fabicon_square.png" type="image/png">
  <link rel="stylesheet" href="/diamondlink/style.css?v=2">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .required {
      color: red;
      margin-left: 5px;
    }
  </style>
</head>
<body>

<div id="header-placeholder"></div>

<main class="container">
  <h1>アカウント作成</h1>
  <p>以下の情報を入力してください（※現在はダミーです）。</p>

<style>
  .error-message {
    color: red;
    font-size: 0.9em;
    margin-top: 5px;
  }
</style>

<form id="account-form" action="https://formspree.io/f/xqaqaloa" method="POST">

    <label>氏名<span class="required">*</span><br>
  姓 <input type="text" name="last-name" id="last-name" required>
  <div class="error-message" id="error-last-name"></div>
  名 <input type="text" name="first-name" id="first-name" required>
  <div class="error-message" id="error-first-name"></div>
</label><br><br>

    <label>ニックネーム（あとから変更できます）<br>
  <input type="text" name="nickname">
  <div class="error-message" id="error-nickname"></div>
</label><br><br>

    <label for="prefecture">お住まいの地域<span class="required">*</span></label><br>
<select name="prefecture" id="prefecture" required>
      <option value="">選択してください</option>
      <optgroup label="北海道・東北地方">
        <option value="北海道">北海道</option>
        <option value="青森県">青森県</option>
        <option value="岩手県">岩手県</option>
        <option value="宮城県">宮城県</option>
        <option value="秋田県">秋田県</option>
        <option value="山形県">山形県</option>
        <option value="福島県">福島県</option>
      </optgroup>
      <optgroup label="関東地方">
        <option value="茨城県">茨城県</option>
        <option value="栃木県">栃木県</option>
        <option value="群馬県">群馬県</option>
        <option value="埼玉県">埼玉県</option>
        <option value="千葉県">千葉県</option>
        <option value="東京都">東京都</option>
        <option value="神奈川県">神奈川県</option>
      </optgroup>
      <optgroup label="中部地方">
        <option value="新潟県">新潟県</option>
        <option value="富山県">富山県</option>
        <option value="石川県">石川県</option>
        <option value="福井県">福井県</option>
        <option value="山梨県">山梨県</option>
        <option value="長野県">長野県</option>
        <option value="岐阜県">岐阜県</option>
        <option value="静岡県">静岡県</option>
        <option value="愛知県">愛知県</option>
      </optgroup>
      <optgroup label="近畿地方">
        <option value="三重県">三重県</option>
        <option value="滋賀県">滋賀県</option>
        <option value="京都府">京都府</option>
        <option value="大阪府">大阪府</option>
        <option value="兵庫県">兵庫県</option>
        <option value="奈良県">奈良県</option>
        <option value="和歌山県">和歌山県</option>
      </optgroup>
      <optgroup label="中国地方">
        <option value="鳥取県">鳥取県</option>
        <option value="島根県">島根県</option>
        <option value="岡山県">岡山県</option>
        <option value="広島県">広島県</option>
        <option value="山口県">山口県</option>
      </optgroup>
      <optgroup label="四国地方">
        <option value="徳島県">徳島県</option>
        <option value="香川県">香川県</option>
        <option value="愛媛県">愛媛県</option>
        <option value="高知県">高知県</option>
      </optgroup>
      <optgroup label="九州・沖縄地方">
        <option value="福岡県">福岡県</option>
        <option value="佐賀県">佐賀県</option>
        <option value="長崎県">長崎県</option>
        <option value="熊本県">熊本県</option>
        <option value="大分県">大分県</option>
        <option value="宮崎県">宮崎県</option>
        <option value="鹿児島県">鹿児島県</option>
        <option value="沖縄県">沖縄県</option>
      </optgroup>
    </select>
<div class="error-message" id="error-prefecture"></div><br><br>

    <label>市区町村<span class="required">*</span><br>
  <select name="city" id="city-select" required>
    <option value="">選択してください</option>
  </select>
  <div class="error-message" id="error-city"></div>
</label><br><br>

    <label>生年月日<span class="required">*</span><br>
  <input type="text" id="birthdate" name="birthdate" placeholder="例）20001215" required pattern="\d{8}">
  <div class="error-message" id="error-birthdate"></div>
</label><br><br>
    <label>性別<span class="required">*</span><br>
  <select name="gender" required>
    <option value="">選択してください</option>
    <option value="male">男性</option>
    <option value="female">女性</option>
    <option value="other">その他</option>
  </select>
  <div class="error-message" id="error-gender"></div>
</label><br><br>

    <label>メールアドレス<span class="required">*</span><br>
      <input type="email" name="email" required>
    </label><br><br>

<label>パスワード<span class="required">*</span><br>
  <div style="position: relative; max-width: 300px;">
    <input type="password" name="password" id="password" required style="width: 100%; padding-right: 40px;">
    <button type="button" id="toggle-password" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;">
  <i class="fa-solid fa-eye"></i>
</button>

    <div id="password-strength" style="height: 8px; background: #ccc; border-radius: 4px; margin-top: 10px; overflow: hidden;">
      <div id="password-strength-bar" style="height: 100%; width: 0%; background: red; transition: width 0.3s;"></div>
    </div>
    <p id="password-strength-text" style="margin: 5px 0 0; font-size: 0.9em; color: gray;">パスワードの強度を表示します</p>
    </div>
  <div class="error-message" id="error-password"></div>
</label><br><br>

    <label>利用目的（複数選択可）<span class="required">*</span><br>
      <input type="checkbox" name="purpose" value="join-team"> 本格的な加入チームを探したい<br>
      <input type="checkbox" name="purpose" value="publish-team"> 自分のチーム情報を掲載したい<br>
      <input type="checkbox" name="purpose" value="practice-only"> 練習だけ参加できるチームを探したい<br>
      <input type="checkbox" name="purpose" value="practice-match"> 練習試合の相手を探したい<br>
      <input type="checkbox" name="purpose" value="other"> その他<br>
      <textarea name="other-purpose" rows="2" placeholder="その他の場合はこちらに記入"></textarea>
    </label><br><br>

    <button type="submit">アカウント作成（ダミー）</button>
    <p style="font-size: small; color: gray;">※まだ送信機能は有効になっていません</p>

  </form>

  <p>すでにアカウントをお持ちの方は <a href="#">こちらからログイン</a></p>
</main>

<div id="footer-placeholder"></div>

<script src="/diamondlink/header-loader.js"></script>
<script src="/diamondlink/header-menu.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // フッター読み込み
  fetch('/diamondlink/footer.html')
    .then(res => res.text())
    .then(html => {
      document.getElementById('footer-placeholder').innerHTML = html;
    });

  // 都道府県選択時、市区町村を取得
  const prefectureSelect = document.getElementById('prefecture');
  const citySelect = document.getElementById('city-select');

  prefectureSelect.addEventListener('change', function() {
    const selectedPrefecture = this.value;
    citySelect.innerHTML = '<option value="">選択してください</option>';

    if (selectedPrefecture) {
      fetch('prefecture_city.json')
        .then(response => response.json())
        .then(data => {
          if (data[selectedPrefecture]) {
            data[selectedPrefecture].forEach(city => {
              const option = document.createElement('option');
              option.value = city;
              option.textContent = city;
              citySelect.appendChild(option);
            });
          }
        });
    }
  });

  // 生年月日入力補助（8桁入力対応）
const birthInput = document.getElementById('birthdate');
if (birthInput) {
  birthInput.addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, ''); // 数字以外除去

    if (value.length > 8) {
      value = value.slice(0, 8); // 8桁までしか許可しない
    }

    if (value.length === 8) {
      const year = value.slice(0, 4);
      const month = value.slice(4, 6);
      const day = value.slice(6, 8);
      e.target.value = `${year}/${month}/${day}`; // スラッシュ付きに変換
    } else {
      e.target.value = value;
    }
  });
}
});
</script>

  <script>
document.addEventListener('DOMContentLoaded', function() {
  const passwordInput = document.getElementById('password');
  const strengthBar = document.getElementById('password-strength-bar');
  const strengthText = document.getElementById('password-strength-text');

  passwordInput.addEventListener('input', function() {
    const value = passwordInput.value;
    let strength = 0;

    // 強度判定（英字・数字・記号）
    if (/[a-z]/.test(value)) strength++;
    if (/[A-Z]/.test(value)) strength++;
    if (/[0-9]/.test(value)) strength++;
    if (/[^a-zA-Z0-9]/.test(value)) strength++;

    // 長さも加味
    if (value.length >= 8) strength++;

    // 強度に応じたバーとテキスト
    if (strength <= 2) {
      strengthBar.style.width = "33%";
      strengthBar.style.background = "red";
      strengthText.textContent = "弱い";
      strengthText.style.color = "red";
    } else if (strength === 3 || strength === 4) {
      strengthBar.style.width = "66%";
      strengthBar.style.background = "orange";
      strengthText.textContent = "普通";
      strengthText.style.color = "orange";
    } else if (strength >= 5) {
      strengthBar.style.width = "100%";
      strengthBar.style.background = "green";
      strengthText.textContent = "強い";
      strengthText.style.color = "green";
    } else {
      strengthBar.style.width = "0%";
      strengthText.textContent = "パスワードの強度を表示します";
      strengthText.style.color = "gray";
    }
  });
});
</script>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  const togglePassword = document.getElementById('toggle-password');
  const passwordInput = document.getElementById('password');
  const eyeIcon = togglePassword.querySelector('i');

  togglePassword.addEventListener('click', function() {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);

    // アイコン切り替え
    if (type === 'password') {
      eyeIcon.classList.remove('fa-eye-slash');
      eyeIcon.classList.add('fa-eye');
    } else {
      eyeIcon.classList.remove('fa-eye');
      eyeIcon.classList.add('fa-eye-slash');
    }
  });
});
  </script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('account-form');

  form.addEventListener('submit', function(event) {
    let hasError = false;

    // 姓のチェック
    const lastName = document.getElementById('last-name').value.trim();
    if (lastName === '') {
      document.getElementById('error-last-name').textContent = '姓を入力してください。';
      hasError = true;
    } else {
      document.getElementById('error-last-name').textContent = '';
    }

    // 名のチェック
    const firstName = document.getElementById('first-name').value.trim();
    if (firstName === '') {
      document.getElementById('error-first-name').textContent = '名を入力してください。';
      hasError = true;
    } else {
      document.getElementById('error-first-name').textContent = '';
    }

    // 都道府県のチェック
    const prefecture = document.getElementById('prefecture').value;
    if (prefecture === '') {
      document.getElementById('error-prefecture').textContent = '都道府県を選択してください。';
      hasError = true;
    } else {
      document.getElementById('error-prefecture').textContent = '';
    }

    // 市区町村のチェック
    const city = document.getElementById('city-select').value;
    if (city === '') {
      document.getElementById('error-city').textContent = '市区町村を選択してください。';
      hasError = true;
    } else {
      document.getElementById('error-city').textContent = '';
    }

    // エラーがあったら送信ストップ
    if (hasError) {
      event.preventDefault();
    }
  });
});
</script>
</body>
</html>
