<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>DiamondLink | チーム検索</title>
  <link rel="stylesheet" href="/diamondlink/style.css?v=2">
</head>
<body>

  <!-- 共通ヘッダー挿入 -->
  <div id="header-placeholder"></div>

  <!-- メインコンテンツ -->
  <main class="container">
    <h1>チームを探す</h1>

    <h2>検索フォーム</h2>
    <form>
      <label>キーワード検索：<br>
        <input type="text" name="keyword" placeholder="チーム名や地域を入力">
      </label><br><br>

      <label>競技種別：<br>
        <select name="sport">
          <option value="">指定なし</option>
          <option value="baseball">野球</option>
          <option value="softball">ソフトボール</option>
        </select>
      </label><br><br>

      <label>チーム構成：<br>
        <select name="gender">
          <option value="">指定なし</option>
          <option value="male">男子</option>
          <option value="female">女子</option>
          <option value="mixed">混合</option>
        </select>
      </label><br><br>

      <label>野球種別：<br>
        <select name="baseball-type">
          <option value="">指定なし</option>
          <option value="soft">軟式</option>
          <option value="semi-hard">準硬式</option>
          <option value="hard">硬式</option>
        </select>
      </label><br><br>

      <label>ソフトボール種別：<br>
        <select name="softball-type">
          <option value="">指定なし</option>
          <option value="rubber">ゴムボール</option>
          <option value="leather">革ボール</option>
        </select>
      </label><br><br>

      <button type="submit" disabled>検索（※ダミー）</button>
      <p style="font-size: small; color: gray;">※現在は検索機能は未対応です</p>
    </form>

    <hr>

    <h2>チーム一覧</h2>
    <ul id="team-list"></ul>

    <div id="pagination" class="pagination"></div>

    <hr>
    <a href="index.html">← トップに戻る</a>
  </main>

  <!-- 共通フッター挿入 -->
  <div id="footer-placeholder"></div>

  <!-- JavaScript（チームデータとページネーション） -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ヘッダーとフッター読み込み
      fetch('/diamondlink/header.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('header-placeholder').innerHTML = html;
          const hamburger = document.getElementById('hamburger');
          const navMenu = document.getElementById('nav-menu');
          hamburger.addEventListener('click', () => {
            navMenu.classList.toggle('show');
          });
        });

      fetch('/diamondlink/footer.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('footer-placeholder').innerHTML = html;
        });

      // チームデータ
      const teams = [
        { name: "ダイヤモンドスターズ", area: "東京都", type: "一般", category: "軟式", thumbnail: "https://placehold.co/80x80" },
        { name: "ブルースカイズ", area: "大阪府", type: "学生", category: "硬式", thumbnail: "https://placehold.co/80x80" },
        { name: "サンライズソフトボールクラブ", area: "愛知県", type: "女子", category: "ゴムボール", thumbnail: "https://placehold.co/80x80" },
        // ここに追加していける！
      ];

      const teamList = document.getElementById('team-list');
      const pagination = document.getElementById('pagination');
      const teamsPerPage = 10;
      let currentPage = 1;

      function displayTeams(page) {
        teamList.innerHTML = '';
        const start = (page - 1) * teamsPerPage;
        const end = start + teamsPerPage;
        const pageTeams = teams.slice(start, end);

        pageTeams.forEach(team => {
          const li = document.createElement('li');
          li.innerHTML = `
            <img src="${team.thumbnail}" alt="${team.name}" class="team-thumb">
            <div class="team-info">
              <strong>${team.name}</strong><br>
              ${team.area}・${team.type}・${team.category}
            </div>
          `;
          teamList.appendChild(li);
        });
      }

      function setupPagination() {
        pagination.innerHTML = '';
        const pageCount = Math.ceil(teams.length / teamsPerPage);

        if (pageCount > 1) {
          const first = document.createElement('button');
          first.textContent = '最初へ';
          first.onclick = () => { currentPage = 1; update(); };
          pagination.appendChild(first);

          for (let i = 1; i <= pageCount; i++) {
            const btn = document.createElement('button');
            btn.textContent = i;
            if (i === currentPage) btn.disabled = true;
            btn.onclick = () => { currentPage = i; update(); };
            pagination.appendChild(btn);
          }

          const last = document.createElement('button');
          last.textContent = '最後へ';
          last.onclick = () => { currentPage = pageCount; update(); };
          pagination.appendChild(last);
        }
      }

      function update() {
        displayTeams(currentPage);
        setupPagination();
      }

      update();
    });
  </script>

</body>
</html>
